<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Javascript SDK</title>
    <meta name="description" content="Install">


    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="shortcut icon" href="/favicon.png">
    <!-- Begin Jekyll SEO tag v2.2.2 -->
<title>Javascript SDK | Oopsie Doc</title>
<meta property="og:title" content="Javascript SDK" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Install" />
<meta property="og:description" content="Install" />
<link rel="canonical" href="http://localhost:4000/docs/javascript-sdk/" />
<meta property="og:url" content="http://localhost:4000/docs/javascript-sdk/" />
<meta property="og:site_name" content="Oopsie Doc" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-08-15T07:25:30+02:00" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"Javascript SDK","datePublished":"2018-08-15T07:25:30+02:00","dateModified":"2018-08-15T07:25:30+02:00","description":"Install","url":"http://localhost:4000/docs/javascript-sdk/"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="canonical" href="http://localhost:4000/docs/javascript-sdk/">
    <link rel="alternate" type="application/rss+xml" title="Oopsie Doc" href="http://localhost:4000/feed.xml" />
</head>


<body>

    <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container navbar-container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
            <a class="navbar-brand" href="/">
                <span><img src="/img/Oopsie_logo_300dpi.png"></span>
            </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <div class="navbar-right">
                <form class="navbar-form navbar-left">
                    <div class="form-group has-feedback">
                        <input id="search-box" type="text" class="form-control" placeholder="Search...">
                        <i class="fa fa-search form-control-feedback"></i>
                    </div>
                </form>
                <ul class="nav navbar-nav">
                    <li><a href="https://github.com/techoopsie/oopsie-docs"><i class="fa fa-github" aria-hidden="true"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>


    <div class="page-content">
        <div class="wrapper">
            <div class="container-fluid">
    <div class="row">
        <div class="col-md-4">
          <div > <!--class="panel-group" id="accordion" role="tablist" aria-multiselectable="true"-->

  <div class="panel panel-default" style="margin-bottom:0px;">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-1" aria-expanded="true" aria-controls="collapse-1">
          Getting Started
        </a>
      </h4>
    </div>
    <div id="collapse-1" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href=""></a>
        
          
          
          <a class="list-group-item " href="/docs/quickstart/">Quickstart</a>
        
          
          
          <a class="list-group-item " href="/docs/overview/">Overview</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default" style="margin-bottom:0px;">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-2" aria-expanded="true" aria-controls="collapse-2">
          Applications
        </a>
      </h4>
    </div>
    <div id="collapse-2" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/docs/what-is-an-application/">What is an Application?</a>
        
          
          
          <a class="list-group-item " href="/docs/resources/">Resources</a>
        
          
          
          <a class="list-group-item " href="/docs/attributes/">Attributes</a>
        
          
          
          <a class="list-group-item " href="/docs/views/">Views</a>
        
          
          
          <a class="list-group-item " href="/docs/res-auth/">Resource Auth</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default" style="margin-bottom:0px;">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-3" aria-expanded="true" aria-controls="collapse-3">
          Site
        </a>
      </h4>
    </div>
    <div id="collapse-3" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/docs/what-is-a-site/">Site</a>
        
          
          
          <a class="list-group-item " href="/docs/api-keys/">Api keys</a>
        
          
          
          <a class="list-group-item " href="/docs/users/">Users</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default" style="margin-bottom:0px;">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-4" aria-expanded="true" aria-controls="collapse-4">
          Authorization
        </a>
      </h4>
    </div>
    <div id="collapse-4" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/docs/what-is-auth/">What is Authorization?</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default" style="margin-bottom:0px;">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-5" aria-expanded="true" aria-controls="collapse-5">
          Api
        </a>
      </h4>
    </div>
    <div id="collapse-5" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/docs/how-to/">OOPSIE REST API</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default" style="margin-bottom:0px;">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-6" aria-expanded="true" aria-controls="collapse-6">
          SDKs
        </a>
      </h4>
    </div>
    <div id="collapse-6" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item active" href="/docs/javascript-sdk/">Javascript SDK</a>
        
          
          
          <a class="list-group-item " href="/docs/java-sdk/">Java SDK</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default" style="margin-bottom:0px;">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-7" aria-expanded="true" aria-controls="collapse-7">
          Examples
        </a>
      </h4>
    </div>
    <div id="collapse-7" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/docs/blog/">Blog</a>
        
          
          
          <a class="list-group-item " href="/docs/sensor/">Sensor</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default" style="margin-bottom:0px;">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-8" aria-expanded="true" aria-controls="collapse-8">
          Misc
        </a>
      </h4>
    </div>
    <div id="collapse-8" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/docs/faq/">FAQ</a>
        
      </ul>
    </div>
  </div>

</div>

        </div>

        <div class="col-md-8">
            <h1>Javascript SDK</h1>
            <div id="markdown-content-container"><h2 id="install">Install</h2>
<hr />

<h4 id="npm">npm</h4>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>npm install oopsie-sdk
</code></pre>
</div>

<h4 id="cdn">CDN</h4>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdnjs.cloudflare.com/oopsie/libs/oopsie-sdk/0.99.0/js/oopsie.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>
</div>

<h2 id="usage">Usage</h2>

<h4 id="initialization-and-basics">Initialization and basics</h4>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">oopsie</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">OopsieSite</span><span class="p">(</span><span class="nx">prodApiUrl</span><span class="p">,</span> <span class="nx">siteId</span><span class="p">,</span> <span class="nx">customerId</span><span class="p">);</span>
<span class="nx">oopsie</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// We have initialized oopsie sdk...</span>
<span class="p">});</span>
</code></pre>
</div>

<p>After the initialization you can start to Create, Get, Delete and Update your entities. You can also Register, Login, Logout and Refresh Users.
The SDK works in the same way as you model and Deploy your Site. You will initialize the SDK for a specific Site to get the Application you want to work with and choose a Resource on it. The Resource object is where you will make all your queries to retrieve and create entities for the specified Resource.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// First you need to get one of your Applications that you have deployed to your site.</span>
<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">oopsie</span><span class="p">.</span><span class="nx">getApp</span><span class="p">(</span><span class="s1">'MyApp'</span><span class="p">);</span>

<span class="c1">// On this object you can then retrieve the different Resources you have.</span>
<span class="c1">// It is this object that you use to create, get, update and delete entities on your Resource.</span>
<span class="kd">var</span> <span class="nx">myResource</span> <span class="o">=</span> <span class="nx">app</span><span class="p">.</span><span class="nx">getResource</span><span class="p">(</span><span class="s1">'MyResource'</span><span class="p">);</span>
</code></pre>
</div>

<h4 id="get">Get</h4>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">myResource</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">execute</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s1">'We got an error when getting entities'</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Else we have our result</span>
<span class="p">}));</span>

<span class="kd">let</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">eid</span><span class="p">:</span> <span class="s1">'f89028c3-7d02-4ce8-8bd4-1d88b51aa461'</span>
<span class="p">};</span>
<span class="nx">myResource</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">withParams</span><span class="p">(</span><span class="nx">params</span><span class="p">).</span><span class="nx">execute</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
<span class="nx">myResource</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">byView</span><span class="p">(</span><span class="s1">'MyView'</span><span class="p">).</span><span class="nx">execute</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
<span class="nx">myResource</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">limit</span><span class="p">(</span><span class="mi">100</span><span class="p">).</span><span class="nx">execute</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
<span class="nx">myResource</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">expandRelations</span><span class="p">().</span><span class="nx">execute</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>

<span class="c1">// You can also add all of the methods after get() in different order and use the ones you need.</span>
<span class="nx">myResource</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">withParams</span><span class="p">(</span><span class="nx">params</span><span class="p">).</span><span class="nx">byView</span><span class="p">(</span><span class="s1">'MyView'</span><span class="p">).</span><span class="nx">limit</span><span class="p">(</span><span class="mi">100</span><span class="p">).</span><span class="nx">expandRelations</span><span class="p">().</span><span class="nx">execute</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>

<span class="c1">// You can also store the query to later get nextPage or previous page, if they exists.</span>
<span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">myResource</span><span class="p">.</span><span class="nx">get</span><span class="p">().</span><span class="nx">byView</span><span class="p">(</span><span class="s1">'MyView'</span><span class="p">).</span><span class="nx">execute</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">query</span><span class="p">.</span><span class="nx">hasNextPage</span><span class="p">())</span> <span class="p">{</span>
    <span class="nx">query</span><span class="p">.</span><span class="nx">nextPage</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">if</span><span class="p">(</span><span class="nx">query</span><span class="p">.</span><span class="nx">hasPrevPage</span><span class="p">())</span> <span class="p">{</span>
    <span class="nx">query</span><span class="p">.</span><span class="nx">prevPage</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>

<h4 id="create">Create</h4>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'Smith'</span><span class="p">,</span>
    <span class="na">age</span><span class="p">:</span> <span class="mi">22</span>
<span class="p">};</span>
<span class="nx">myResource</span><span class="p">.</span><span class="nx">create</span><span class="p">().</span><span class="nx">execute</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
<span class="nx">myResource</span><span class="p">.</span><span class="nx">create</span><span class="p">().</span><span class="nx">withParams</span><span class="p">(</span><span class="nx">params</span><span class="p">).</span><span class="nx">execute</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
</code></pre>
</div>

<h4 id="update">Update</h4>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'Smith'</span><span class="p">,</span>
    <span class="na">age</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>
    <span class="c1">// Save will need to have eid and all Partition Keys and Clustering Keys.</span>
    <span class="na">eid</span><span class="p">:</span> <span class="s1">'f89028c3-7d02-4ce8-8bd4-1d88b51aa461'</span> 
<span class="p">};</span>
<span class="nx">myResource</span><span class="p">.</span><span class="nx">save</span><span class="p">().</span><span class="nx">execute</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
<span class="nx">myResource</span><span class="p">.</span><span class="nx">save</span><span class="p">().</span><span class="nx">withParams</span><span class="p">(</span><span class="nx">params</span><span class="p">).</span><span class="nx">execute</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
</code></pre>
</div>

<h4 id="delete">Delete</h4>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'Smith'</span><span class="p">,</span>
    <span class="na">age</span><span class="p">:</span> <span class="mi">22</span>
<span class="p">};</span>
<span class="nx">myResource</span><span class="p">.</span><span class="k">delete</span><span class="p">().</span><span class="nx">execute</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
<span class="nx">myResource</span><span class="p">.</span><span class="k">delete</span><span class="p">().</span><span class="nx">withParams</span><span class="p">(</span><span class="nx">params</span><span class="p">).</span><span class="nx">execute</span><span class="p">(</span><span class="nx">cb</span><span class="p">);</span>
</code></pre>
</div>

<h2 id="users">Users</h2>

<p>The Javascript SDK can also help you manage Users for your site.</p>

<h4 id="login">Login</h4>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">email</span><span class="p">:</span> <span class="s1">'my@email.com'</span><span class="p">,</span>
    <span class="na">password</span><span class="p">:</span> <span class="s1">'my-super-secret'</span>
<span class="p">};</span>
<span class="nx">oopsie</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// We are not logged in!</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// We are logged in!</span>
<span class="p">});</span>
</code></pre>
</div>

<h4 id="register">Register</h4>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">email</span><span class="p">:</span> <span class="s1">'my@email.com'</span><span class="p">,</span> 
    <span class="na">password</span><span class="p">:</span> <span class="s1">'my-super-secret'</span><span class="p">,</span> 
    <span class="na">auths</span><span class="p">:[</span><span class="s1">'User'</span><span class="p">],</span>
    <span class="na">firstname</span><span class="p">:</span> <span class="s1">'Andreas'</span><span class="p">,</span>
    <span class="na">lastname</span><span class="p">:</span> <span class="s1">'Andersson'</span>
<span class="p">};</span>

<span class="nx">oopsie</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// We are not logged in!</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// We are logged in!</span>
<span class="p">});</span>
</code></pre>
</div>

<h4 id="logout">Logout</h4>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">oopsie</span><span class="p">.</span><span class="nx">logout</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// We are not logged out!</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// We logged out!</span>
<span class="p">});</span>
</code></pre>
</div>

<h4 id="refresh">Refresh</h4>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">oopsie</span><span class="p">.</span><span class="nx">refresh</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// We didnt manage to refresh the users session.</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// We refreshed the session for your user.</span>
<span class="p">});</span>
</code></pre>
</div>

<h4 id="me">Me</h4>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">oopsie</span><span class="p">.</span><span class="nx">me</span><span class="p">((</span><span class="nx">err</span><span class="p">,</span> <span class="nx">me</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Something went wrong!</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// We can inspect the logged in user, email etc.</span>
<span class="p">});</span>
</code></pre>
</div>
</div>
            <p class="text-center">
              <br />
              <a target="_blank" href="https://github.com/techoopsie/oopsie-docs/blob/development/_docs/sdks/javascript-sdk.md" class="btn btn-default githubEditButton" role="button">
                <i class="fa fa-pencil fa-lg"></i> Improve this page
              </a>
            </p>
            <hr>
            





  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    <ul class="pager">
      
        
        
        <li class="previous">
          <a href="/docs/how-to/">
            <span aria-hidden="true">&larr;</span> Previous
          </a>
        </li>
      

      
        
        
        <li class="next">
          <a href="/docs/java-sdk/">
            Next <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
      
    </div>
    <div class="clear"></div>
    

        </div>

    </div>
</div>

        </div>
    </div>

    <footer class="footer">
    <div class="container">

        <p class="text-center">
            Oopsie Doc 2018 |
            Powered by <a href="http://oopsie.io">Techoopsie AB</a>
        </p>
        <!-- <p class="text-muted">Place sticky footer content here.</p> -->
    </div>
</footer>

    <script>
  var baseurl = ''
</script>
<script src="/js/jquery.js "></script>
<script src="/js/bootstrap.min.js "></script>
<script src="/js/typeahead.bundle.min.js "></script>

<script src="/js/main.js "></script>

</body>

</html>
